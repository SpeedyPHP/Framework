#!/usr/bin/env php
<?php
defined("DS") or define("DS", DIRECTORY_SEPARATOR);
defined('SPEEDY_ENV')  or define("SPEEDY_ENV", (getenv("SPEEDY_ENV")) ? getenv('SPEEDY_ENV') : 'development');
defined('ROOT') or define('ROOT', dirname(dirname(__FILE__)));	// Define the root directory of App
define("SPEEDY_PATH", (getenv('SPEEDY_PATH')) ? getenv('SPEEDY_PATH') . DS : ROOT . DS);
define("SPEEDY_TEMPLATES", dirname(dirname(__FILE__)) . DS . "tpls" . DS);
define("SPEEDY_CLI", dirname(__FILE__));

define("APP_ROOT", getcwd());
define("CONFIG_PATH", APP_ROOT . DS . 'config');
define("APP_PATH", APP_ROOT . DS . 'app');
define('VENDOR_PATH', APP_ROOT . DS . 'vendor');
defined("STDOUT") or define("STDOUT", fopen("php://stdout", "w"));

require_once VENDOR_PATH . DS . 'autoload.php';

if (function_exists('ini_set')) {
	ini_set('include_path', SPEEDY_PATH . PATH_SEPARATOR . APP_PATH . PATH_SEPARATOR . ini_get('include_path'));
}

function output($str = "") {
	fwrite(STDOUT, $str . "\n");
}

$pathToApp	= CONFIG_PATH . DS . 'App.php';
if (file_exists($pathToApp)) {
	include $pathToApp;
}

App::instance();
if (class_exists('App')) {
	define("APP_LOADED", true);
} else {
    define("APP_LOADED", false);
}

require_once "Speedy.php";